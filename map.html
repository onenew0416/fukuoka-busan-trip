<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>æ—…éŠåœ°åœ–</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        /* è®“åœ°åœ–å¡«æ»¿å‰©é¤˜ç©ºé–“ */
        #map { height: calc(100vh - 180px); width: 100%; z-index: 10; border-radius: 24px; }
        
        /* è‡ªè¨‚é¡è‰² */
        .text-custom-green { color: rgb(0, 140, 0); }
        .bg-custom-green { background-color: rgb(0, 140, 0); }
    </style>
</head>
<body class="bg-green-50 text-slate-800 pb-24 overflow-hidden">

    <div class="p-6 pt-10 flex justify-between items-end">
        <div>
            <h1 class="text-2xl font-bold text-slate-800">æ—…éŠåœ°åœ– <i class="fas fa-map-marked-alt text-custom-green"></i></h1>
        </div>
        <div class="flex space-x-2">
            <button onclick="flyTo('fukuoka')" class="bg-white px-3 py-1.5 rounded-full shadow-sm text-xs font-bold text-slate-600 hover:text-custom-green hover:shadow-md transition">
                ğŸ‡¯ğŸ‡µ ç¦å²¡
            </button>
            <button onclick="flyTo('busan')" class="bg-white px-3 py-1.5 rounded-full shadow-sm text-xs font-bold text-slate-600 hover:text-custom-green hover:shadow-md transition">
                ğŸ‡°ğŸ‡· é‡œå±±
            </button>
        </div>
    </div>

    <div class="px-4">
        <div id="map" class="shadow-lg border-2 border-white"></div>
    </div>

    <div class="fixed bottom-6 left-4 right-4 bg-white rounded-full shadow-2xl py-3 px-6 flex justify-between items-center z-50">
        <a href="index.html" class="flex flex-col items-center text-slate-400 hover:text-custom-green cursor-pointer">
            <i class="fas fa-suitcase text-lg mb-1"></i>
            <span class="text-[10px]">è¡Œç¨‹</span>
        </a>
        <div class="flex flex-col items-center text-custom-green cursor-pointer">
            <i class="fas fa-map-marked-alt text-lg mb-1"></i>
            <span class="text-[10px] font-bold">åœ°åœ–</span>
        </div>
        <a href="map.html" class="flex flex-col items-center text-slate-400 hover:text-custom-green cursor-pointer">
            <i class="fas fa-wallet text-lg mb-1"></i>
            <span class="text-[10px]">è¨˜å¸³</span>
        </a>
        <div class="flex flex-col items-center text-slate-400 hover:text-custom-green cursor-pointer">
            <i class="fas fa-shopping-bag text-lg mb-1"></i>
            <span class="text-[10px]">è³¼ç‰©</span>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // 1. åˆå§‹åŒ–åœ°åœ–ï¼Œé è¨­ä¸­å¿ƒé»è¨­åœ¨ç¦å²¡
        // åº§æ¨™æ ¼å¼: [ç·¯åº¦, ç¶“åº¦]
        const map = L.map('map').setView([33.5902, 130.4017], 13);

        // 2. è¼‰å…¥ OpenStreetMap åœ–è³‡ (å…è²»)
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map);

        // 3. å®šç¾©åœ°é»è³‡æ–™ (åç¨±, ç·¯åº¦, ç¶“åº¦, é¡å‹)
        const locations = [
            // --- ç¦å²¡ ---
            { name: "ç¦å²¡æ©Ÿå ´ (FUK)", lat: 33.5859, lng: 130.4446, type: "flight" },
            { name: "åšå¤šç«™", lat: 33.5902, lng: 130.4207, type: "train" },
            { name: "å¤©ç¥ç«™ (é€›è¡—)", lat: 33.5916, lng: 130.3989, type: "shop" },
            { id: "unplan", name: "UNPLAN Fukuoka (ä½å®¿)", lat: 33.5895, lng: 130.3785, type: "hotel" },
            { name: "å¤§æ¿ å…¬åœ’", lat: 33.5866, lng: 130.3764, type: "spot" },
            { name: "å¤ªå®°åºœå¤©æ»¿å®®", lat: 33.5215, lng: 130.5349, type: "spot" },
            { name: "æµ·ä¹‹ä¸­é“æµ·æ¿±å…¬åœ’", lat: 33.6595, lng: 130.3633, type: "spot" },
            { name: "ç›¸å³¶ (è²“å³¶)", lat: 33.7569, lng: 130.3875, type: "spot" },

            // --- é‡œå±± ---
            { name: "é‡‘æµ·æ©Ÿå ´ (PUS)", lat: 35.1732, lng: 128.9464, type: "flight" },
            { id: "urbanstay", name: "Urbanstay Seomyeon (ä½å®¿)", lat: 35.1578, lng: 129.0600, type: "hotel" },
            { name: "è¥¿é¢ç«™ (é€›è¡—)", lat: 35.1578, lng: 129.0600, type: "shop" },
            { name: "ç”˜å·æ´æ–‡åŒ–æ‘", lat: 35.0974, lng: 129.0106, type: "spot" },
            { name: "æ¾å³¶é¾å®®å¤©ç©ºæ­¥é“", lat: 35.0756, lng: 129.0225, type: "spot" },
            { name: "æµ·é›²å°æµ·ç˜", lat: 35.1587, lng: 129.1604, type: "spot" },
            { name: "é‡œå±±æ¨‚å¤©ä¸–ç•Œ", lat: 35.1950, lng: 129.2133, type: "spot" },
            { name: "Skyline Luge", lat: 35.1925, lng: 129.2150, type: "spot" }
        ];

        // 4. æ ¹æ“šé¡å‹è¨­å®šä¸åŒé¡è‰²çš„æ¨™è¨˜ (ä½¿ç”¨ FontAwesome åœ–ç¤ºçš„ HTML æ¨™è¨˜)
        function getIcon(type) {
            let color = 'rgb(0, 140, 0)'; // é è¨­ç¶ è‰²
            let iconClass = 'fa-map-marker-alt';

            if (type === 'flight') { color = '#3b82f6'; iconClass = 'fa-plane'; } // è—è‰²
            if (type === 'hotel') { color = '#ef4444'; iconClass = 'fa-bed'; } // ç´…è‰²
            if (type === 'shop') { color = '#eab308'; iconClass = 'fa-shopping-bag'; } // é»ƒè‰²
            if (type === 'train') { color = '#64748b'; iconClass = 'fa-train'; } // ç°è‰²

            return L.divIcon({
                className: 'custom-div-icon',
                html: `<div style="background-color: ${color}; width: 30px; height: 30px; border-radius: 50%; display: flex; justify-content: center; align-items: center; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3);">
                        <i class="fas ${iconClass}" style="color: white; font-size: 14px;"></i>
                       </div>`,
                iconSize: [30, 30],
                iconAnchor: [15, 30],
                popupAnchor: [0, -30]
            });
        }

        // 5. å°‡æ‰€æœ‰åœ°é»åŠ å…¥åœ°åœ–
        locations.forEach(loc => {
            L.marker([loc.lat, loc.lng], { icon: getIcon(loc.type) })
             .addTo(map)
             .bindPopup(`<b>${loc.name}</b>`);
        });

        // 6. åˆ‡æ›åŸå¸‚åŠŸèƒ½
        function flyTo(city) {
            if (city === 'fukuoka') {
                map.flyTo([33.5902, 130.4017], 12, { duration: 1.5 });
            } else if (city === 'busan') {
                map.flyTo([35.1578, 129.0600], 12, { duration: 1.5 });
            }
        }
    </script>
</body>
</html>